
# 屏幕

移动设备与PC设备最大的差异在于屏幕，这主要体现在屏幕尺寸和屏幕分辨率两个方面。

通常我们所指的屏幕尺，实际上指的是屏幕对角线的长度（一般用英寸来度量）

分辨率则一般用像素来度量，表示屏幕水平和垂直方向的像素数，例如1920*1080指的是屏幕垂直方向和水平方向分别有1920和1080个像素点而构成

## 像素的概念

## 长度单位

在web开发中可以使用px、em、pt、cm、in等作为长度单位

相对长度单位：在不同屏幕上大小不同，没有固定长度，比如像素。

绝对长度单位：在任何场合任何场景带下是固定不会变的，比如cm，in。

## 像素密度

像素密度指的是每英寸面积中可容纳的像素点数。用PPI或者DPI来表示像素密度的单位。

PPI或者DPI的计算公式如下：

![image](http://picabstract.preview.ftn.qq.com:8080/ftn_pic_abs_v2/55f64dd6fd9670f997c5626e99c18a2d31a2ee124f6f46f4ab999594aa90de2452193f669f2584ba123515d8997d5f5f?pictype=scale&from=30012&version=2.0.0.2&uin=406490508&fname=20170904-32.png&size=1024)

密度越高画面约清晰.
比如：
iphone 3GS  163ppi 480 \* 320像素 3.5英寸
iphone 4S 330ppi 960 \* 640像素  3.5英寸
iphone 4S 的屏幕要比 iphone 3GS清晰很多。
结论：屏幕尺寸固定时，PPI越大，像素的实际大小就会越小，当PPI越小，像素实际大小就越大。

在手机屏幕大小一样的情况下，一个像素大小已经不固定了，开发网页时再使用像素作为单位已经不太合适。

比如设定一个盒子为320px，在iphone 3G上就满屏了，在iphone 4上就只有一半。

保证图像内容在不同PPI设备看上去大小应该差不多，这就是独立像素。在IOS设备上叫做PT在安卓上叫做DP。

我们可以设置44 \* 44dp，这时在iPhone3G/S上代表44 \* 44px，在iPhone4/S上代表88 \* 88px，最终用可以看到的图像差不多大小。

dp或者pt同px是有一个对应（比例）关系的，这个对应（比例）关系是操作系统确定并处理。通过`window.devicePixelRatio`可以获得该比例值


## 物理像素

以上所有的像素的概念都是物理像素，也就是屏幕渲染图像的最小单位。属于屏幕的物理属性，我们没法改变。

获取屏幕的物理像素：
`window.screen.width`
`window.screen.height`

## CSS像素

CSS像素指的是通过CSS进行网页布局时用到的单位。

`width = 100px;` 这个px指的就是css像素，正常情况下，1css像素=1物理像素。

但是在缩放页面的比例时，屏幕物理像素不变，而css像素会成比例变化，所以1个物理像素并不总是等于一个CSS像素。

在PC上，物理像素和CSS像素是保持一致的，所以没什么意义，主要是用在移动端。

## 视口的概念(viewport)

## PC端

视口在PC设备上是取决于浏览器窗口的大小，约束了最顶级元素 `<html>`，决定了 `<html>` 元素的大小。

在PC端，默认情况下获取了 `<html>` 大小也就获取到了视口的大小
`document.documentElement.clientWidth;`
`document.documentElement.clientHeight;`

`<html>` 元素大小是会影响我们的网页布局，父盒子的宽度变小了，会影响子盒子的布局。

如果要让子盒子一直保持不变，那就需要设定父盒子的固定宽度，不让它继承 `<html>` 的宽度，这样再调整浏览器窗口的大小。

由于父盒子宽度不变，子盒子布局也不会乱，只不过浏览器窗口缩小会出现滚动条，但是布局没有乱。

## 移动端

移动端设备普遍比较小，移动端浏览网页也是通过浏览器，而过去网页大部分都是为PC设备来设计的。

由于移动端浏览器窗口小，那么浏览PC端网页布局有可能也会错乱。

浏览器厂商为了避免这种情况，就将视口的宽度设置一个比较大的值。视口的值变大了 `<html>` 的值也就变大了。

在移动设备上视口的大小不取决于浏览器的大小了，而是浏览器厂商允许开发者改变视口大小。

通常厂商会设定980px位默认视口大小。后果是会出现滚动条，或者实惠被缩放的很小。

## 布局视口(layout viewport)和理想视口(ideal viewport)

布局视口和理想视口，在实际开发中只有视口这个概念，**区分理想视口和布局视口只是单纯为了理解视口的概念。**

### 布局视口

指的是我们可以进行网页布局区域的大小。也就是 `<html>` 的大小.
`document.documentElement.clientWidth;`
`document.documentElement.clientHeight;`

### 理想视口

指的是移动设备屏幕的区域。不同设备区域尺寸不同。但这个尺寸指的不是屏幕实际像素，而是独立像素。PT或者DP。这是安卓程序员和IOS程序员使用的单位。

前端在开发时依然是要使用px作为单位。也就是CSS像素。以iphone 5s 举例，它的分辨率是1136 \* 640，换算到px单位也就是568 \* 320，同设备独立像素一样，也是用实际设备像素/比例的结果。
`window.screen.width`
`window.screen.height`

## 滚动条和缩放

布局视口要放到理想视口下去显示，布局视口是比较大的，通常980px，而理想视口比较小，也就是手机尺寸的宽。

那么大盒子放到小盒子中就会出现滚动条，如果不想出现滚动条就要将大盒子缩放至正好放进小盒子的比例。

该出现滚动条还是该缩放并没有统一的规定，全看厂商自己的想法


## 2倍图

比如一张图片的尺寸是165 \* 80px。
在iphone 3GS和iphone 4S上 都设为165dp \* 80dp；
这时图片在iphone 3GS上 尺寸是165px \* 80px；而在iphone 4S上会被拉成330px \* 160px
因为iphone 4S 1dp = 2px ，图片会失真变模糊。
这就是需要2倍图的原因。

## 移动浏览器

系统自带浏览器：滚岁移动设备一起安装的浏览器

应用内置浏览器：在手机APP内部打开某个链接，就是通过应用内置浏览器打开的。这个浏览器更重要一些。
APP的内容可以通过网页来展现，也就是通过H5和C3来写。升级方便。不需要下载，有新内容只需要刷新就行

第三方浏览器：浏览器厂商开发的移动端浏览器APP



# 屏幕适配

## 控制缩放

**屏幕适配最理想的状态就是没有缩放并且也没有滚动条**

出现缩放和滚动条主要原因就是布局视口过大于理想视口，如果这两个一样大，就不会缩放和出现滚动条。

## 通过 `<meta>` 进行控制

```html
<meta  name="viewport" content="width=device-width,initial-scale=1">
```

viewport是苹果为了移动设备浏览器提出的解决方案，后来被其他移动设备厂商采纳

通过设置 `width=device-width`，让布局视口的宽=设备屏幕的宽。当然这里的宽依然指的是独立像素。

`initial-scale=1`，设置页面初始缩放。让浏览器缩放比例一直为1。默认的缩放比例 = device-width \/ 980。

`maximum-scale` 允许用户的最大缩放值，为一个数字，可以带小数。

`minimum-scale` 允许用户的最小缩放值，为一个数字，可以带小数。

`user-scalable` 是否允许用户进行缩放，值为"no"或"yes"。

`width=device-width` 和 `initial-scale=1` 效果相同，但是开发时通常将这两句都加上，防止出现兼容性问题。

## 避免滚动

以上设置完毕后假如viewport的宽是320px，这时设置一个盒子的宽为480px，就会出现滚动条没因为已经限制了视口的缩放和大小。

但是这个值也不能写死，要不然换个设备又会出问题，**所以移动设备的宽度最好使用百分比**。

## 适配方案

不管哪种适配方案，设置 `<meta>` 标签都是必须的。

### 固定宽度

必须让内容区域小于屏幕宽度，根据现在市场情况一般设置最大宽度为320px。

www.viewportsizes.com 保存了现有所有手机屏幕尺寸的信息。

不让内容超出320px也就不会出现滚动。

缺点是宽度大于320px的设备两边会留白，但也是可以接受。可以正常访问。

### 百分比宽度

width和height都是相对于父元素的高和宽，但实际height写百分比没什么意义，通常都是被内容撑开

padding的百分比是相对于父元素的width值

margin的百分比是相对于父元素的width值

border不支持百分比的宽度

